<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SICCHA Streaming | Ganadores üéÑ</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap');

*{box-sizing:border-box;margin:0;padding:0}
body{
  background:#141414;
  color:#fff;
  font-family:'Segoe UI',Arial,sans-serif;
  overflow-x:hidden;
  position:relative;
}

/* Fondo animado con part√≠culas */
.particles{
  position:fixed;
  inset:0;
  z-index:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(229,9,20,0.15) 0%, transparent 50%),
    radial-gradient(circle at 80% 70%, rgba(255,215,0,0.1) 0%, transparent 50%);
  animation:bgShift 15s ease-in-out infinite;
}
@keyframes bgShift{
  0%,100%{filter:hue-rotate(0deg)}
  50%{filter:hue-rotate(20deg)}
}

/* Header con efecto glassmorphism */
header{
  position:fixed;
  top:0;left:0;right:0;
  background:rgba(20,20,20,0.8);
  backdrop-filter:blur(20px);
  border-bottom:1px solid rgba(255,255,255,0.1);
  padding:15px 30px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  z-index:1000;
  transition:all 0.3s;
}
header.scrolled{
  background:rgba(20,20,20,0.95);
  box-shadow:0 10px 40px rgba(0,0,0,0.6);
}
.logo{
  font-family:'Bebas Neue',sans-serif;
  font-size:40px;
  font-weight:900;
  color:#E50914;
  letter-spacing:3px;
  text-shadow:0 0 20px rgba(229,9,20,0.5);
  animation:logoGlow 3s ease-in-out infinite;
}
@keyframes logoGlow{
  0%,100%{text-shadow:0 0 20px rgba(229,9,20,0.5),0 0 40px rgba(229,9,20,0.3)}
  50%{text-shadow:0 0 30px rgba(229,9,20,0.8),0 0 60px rgba(229,9,20,0.5)}
}
.btn{
  background:linear-gradient(135deg,#E50914,#f40612);
  border:none;
  padding:12px 24px;
  border-radius:8px;
  color:#fff;
  font-weight:700;
  cursor:pointer;
  transition:all 0.3s;
  box-shadow:0 4px 15px rgba(229,9,20,0.4);
  position:relative;
  overflow:hidden;
}
.btn::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(45deg,transparent,rgba(255,255,255,0.3),transparent);
  transform:translateX(-100%);
  transition:0.5s;
}
.btn:hover::before{
  transform:translateX(100%);
}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 25px rgba(229,9,20,0.6);
}

/* Hero con parallax */
.hero{
  height:80vh;
  display:flex;
  align-items:center;
  padding:0 40px;
  background:linear-gradient(180deg,rgba(0,0,0,0.6),#141414),
    url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><circle cx="10" cy="10" r="1" fill="%23FFD700" opacity="0.3"/><circle cx="40" cy="30" r="1.5" fill="%23E50914" opacity="0.3"/><circle cx="70" cy="60" r="1" fill="%23fff" opacity="0.2"/><circle cx="90" cy="20" r="1" fill="%23FFD700" opacity="0.3"/></svg>');
  background-size:100px 100px;
  position:relative;
  z-index:1;
  animation:heroFloat 20s ease-in-out infinite;
}
@keyframes heroFloat{
  0%,100%{background-position:0 0}
  50%{background-position:50px 50px}
}
.hero-content{
  animation:slideInUp 1s ease-out;
}
@keyframes slideInUp{
  from{opacity:0;transform:translateY(50px)}
  to{opacity:1;transform:translateY(0)}
}
.hero h1{
  font-size:4.5rem;
  line-height:1.1;
  font-weight:900;
  background:linear-gradient(135deg,#fff,#FFD700);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:textShine 3s ease-in-out infinite;
}
@keyframes textShine{
  0%,100%{filter:brightness(1)}
  50%{filter:brightness(1.3)}
}
.hero p{
  margin-top:15px;
  font-size:1.3rem;
  color:#ccc;
  animation:fadeIn 1.5s ease-out;
}
@keyframes fadeIn{
  from{opacity:0}
  to{opacity:1}
}

/* Decoraci√≥n flotante */
.float-ornament{
  position:absolute;
  font-size:60px;
  opacity:0.3;
  animation:float 6s ease-in-out infinite;
  z-index:0;
}
@keyframes float{
  0%,100%{transform:translateY(0) rotate(0deg)}
  50%{transform:translateY(-30px) rotate(10deg)}
}
.ornament-1{top:15%;right:10%;animation-delay:0s}
.ornament-2{top:50%;left:5%;animation-delay:2s}
.ornament-3{bottom:20%;right:15%;animation-delay:4s}

/* Countdown con efectos 3D */
.countdown{
  margin:60px auto;
  max-width:1000px;
  background:linear-gradient(135deg,rgba(229,9,20,0.15),rgba(11,11,11,0.9));
  border:3px solid #FFD700;
  border-radius:20px;
  padding:40px;
  text-align:center;
  position:relative;
  z-index:1;
  box-shadow:0 20px 60px rgba(0,0,0,0.5),inset 0 1px 1px rgba(255,255,255,0.1);
  animation:pulse 3s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{transform:scale(1);box-shadow:0 20px 60px rgba(0,0,0,0.5)}
  50%{transform:scale(1.02);box-shadow:0 25px 70px rgba(255,215,0,0.4)}
}
.countdown h2{
  font-size:2.5rem;
  margin-bottom:10px;
  background:linear-gradient(135deg,#FFD700,#FFA500);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
}
.timer{
  display:flex;
  justify-content:center;
  gap:25px;
  margin-top:30px;
  flex-wrap:wrap;
}
.time{
  background:rgba(0,0,0,0.8);
  padding:25px 20px;
  border-radius:15px;
  min-width:130px;
  border:2px solid rgba(255,215,0,0.3);
  position:relative;
  overflow:hidden;
  box-shadow:0 10px 30px rgba(0,0,0,0.5);
  transition:all 0.3s;
}
.time:hover{
  transform:translateY(-5px) scale(1.05);
  border-color:#FFD700;
  box-shadow:0 15px 40px rgba(255,215,0,0.4);
}
.time::before{
  content:'';
  position:absolute;
  top:-50%;
  left:-50%;
  width:200%;
  height:200%;
  background:linear-gradient(45deg,transparent,rgba(255,215,0,0.1),transparent);
  transform:rotate(45deg);
  animation:shine 3s linear infinite;
}
@keyframes shine{
  0%{transform:translateX(-100%) rotate(45deg)}
  100%{transform:translateX(100%) rotate(45deg)}
}
.time span{
  display:block;
  font-size:3.5rem;
  color:#FFD700;
  font-weight:900;
  text-shadow:0 0 20px rgba(255,215,0,0.6);
  position:relative;
  z-index:1;
  animation:numberPulse 1s ease-in-out infinite;
}
@keyframes numberPulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.1)}
}
.time label{
  font-size:0.85rem;
  letter-spacing:3px;
  color:#aaa;
  position:relative;
  z-index:1;
}

/* Winners con animaciones espectaculares */
.section{
  padding:80px 30px;
  background:#0b0b0b;
  position:relative;
  z-index:1;
}
.section h2{
  font-size:3rem;
  margin-bottom:15px;
  text-align:center;
  background:linear-gradient(135deg,#FFD700,#E50914);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:titleBounce 2s ease-in-out infinite;
}
@keyframes titleBounce{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.05)}
}
.section p{
  color:#aaa;
  margin-bottom:50px;
  text-align:center;
  font-size:1.1rem;
}

.grid{
  max-width:1200px;
  margin:auto;
  display:grid;
  gap:30px;
}

.card{
  background:linear-gradient(135deg,rgba(229,9,20,0.25),rgba(20,20,20,0.95));
  border:2px solid rgba(255,215,0,0.3);
  border-radius:20px;
  padding:30px;
  display:flex;
  gap:30px;
  align-items:center;
  position:relative;
  overflow:hidden;
  opacity:0;
  transform:translateY(60px) scale(0.8);
  box-shadow:0 15px 45px rgba(0,0,0,0.6);
  transition:all 0.5s cubic-bezier(0.4,0,0.2,1);
}

/* Animaci√≥n de entrada explosiva */
.card.show{
  animation:cardExplode 1s cubic-bezier(0.4,0,0.2,1) forwards;
}
@keyframes cardExplode{
  0%{
    opacity:0;
    transform:translateY(60px) scale(0.8) rotate(-5deg);
  }
  60%{
    opacity:1;
    transform:translateY(-10px) scale(1.1) rotate(2deg);
  }
  100%{
    opacity:1;
    transform:translateY(0) scale(1) rotate(0deg);
  }
}

/* Confeti explosivo */
.card::before{
  content:'üéâ';
  position:absolute;
  top:50%;
  left:50%;
  font-size:100px;
  opacity:0;
  transform:translate(-50%,-50%) scale(0);
  pointer-events:none;
}
.card.show::before{
  animation:confetti 1.5s ease-out;
}
@keyframes confetti{
  0%{
    opacity:1;
    transform:translate(-50%,-50%) scale(0) rotate(0deg);
  }
  50%{
    opacity:0.8;
    transform:translate(-50%,-50%) scale(2.5) rotate(180deg);
  }
  100%{
    opacity:0;
    transform:translate(-50%,-50%) scale(4) rotate(360deg);
  }
}

/* Brillo de fondo */
.card::after{
  content:'';
  position:absolute;
  inset:-100%;
  background:linear-gradient(45deg,transparent,rgba(255,215,0,0.3),transparent);
  transform:translateX(-100%) rotate(45deg);
}
.card.show::after{
  animation:shimmer 2s ease-in-out 0.5s;
}
@keyframes shimmer{
  0%{transform:translateX(-100%) rotate(45deg)}
  100%{transform:translateX(100%) rotate(45deg)}
}

.card:hover{
  transform:translateY(-12px) scale(1.03);
  border-color:#FFD700;
  box-shadow:0 25px 60px rgba(255,215,0,0.4);
}

/* Estrellas flotantes en cada tarjeta */
.sparkles{
  position:absolute;
  inset:0;
  pointer-events:none;
  overflow:hidden;
}
.sparkle{
  position:absolute;
  width:4px;
  height:4px;
  background:#FFD700;
  border-radius:50%;
  box-shadow:0 0 10px #FFD700;
  animation:sparkleFloat 3s ease-in-out infinite;
}
@keyframes sparkleFloat{
  0%,100%{opacity:0;transform:translateY(0) scale(0)}
  20%{opacity:1;transform:translateY(-20px) scale(1)}
  80%{opacity:1;transform:translateY(-40px) scale(1)}
  100%{opacity:0;transform:translateY(-60px) scale(0)}
}

.rank{
  font-size:4.5rem;
  font-weight:900;
  color:#FFD700;
  min-width:100px;
  text-align:center;
  text-shadow:0 0 30px rgba(255,215,0,0.8),0 0 50px rgba(255,215,0,0.5);
  animation:rankSpin 4s ease-in-out infinite;
  position:relative;
  z-index:2;
}
@keyframes rankSpin{
  0%,100%{transform:rotate(0deg) scale(1)}
  50%{transform:rotate(5deg) scale(1.15)}
}

.rank.top-1{
  font-size:5.5rem;
  background:linear-gradient(135deg,#FFD700,#FFA500,#FFD700);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  animation:topRank 2s ease-in-out infinite;
}
@keyframes topRank{
  0%,100%{transform:scale(1) rotate(0deg);filter:brightness(1)}
  50%{transform:scale(1.2) rotate(-5deg);filter:brightness(1.5)}
}

.info{
  flex:1;
  position:relative;
  z-index:2;
}
.name{
  font-size:2rem;
  font-weight:700;
  margin-bottom:8px;
  animation:nameGlow 2s ease-in-out infinite;
}
@keyframes nameGlow{
  0%,100%{text-shadow:0 0 5px rgba(255,255,255,0.5)}
  50%{text-shadow:0 0 15px rgba(255,255,255,0.8),0 0 25px rgba(255,215,0,0.5)}
}
.date{
  font-size:0.95rem;
  color:#bbb;
  margin-top:6px;
  display:flex;
  align-items:center;
  gap:8px;
}

/* Icono decorativo animado */
.card-icon{
  position:absolute;
  top:20px;
  right:20px;
  font-size:50px;
  opacity:0.3;
  animation:iconBounce 3s ease-in-out infinite;
  z-index:1;
}
@keyframes iconBounce{
  0%,100%{transform:translateY(0) rotate(0deg)}
  50%{transform:translateY(-15px) rotate(180deg)}
}

/* Snow mejorado */
.snow{
  position:fixed;
  top:-10px;
  animation:fall linear infinite;
  opacity:0.8;
  z-index:9999;
  pointer-events:none;
  filter:drop-shadow(0 0 3px rgba(255,255,255,0.8));
}
@keyframes fall{
  to{transform:translateY(110vh) rotate(360deg)}
}

/* Loading mejorado */
.loading{
  display:inline-block;
  width:20px;
  height:20px;
  border:3px solid rgba(255,215,0,0.3);
  border-top-color:#FFD700;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{
  to{transform:rotate(360deg)}
}

@media(max-width:768px){
  .hero h1{font-size:2.8rem}
  .card{flex-direction:column;text-align:center}
  .rank{font-size:3rem}
  .countdown{padding:25px}
  .time{min-width:100px}
  .time span{font-size:2.5rem}
}
</style>
</head>

<body>
<div class="particles"></div>

<header id="header">
  <div class="logo">SICCHA üéÑ</div>
  <button class="btn" onclick="location.href='index.html'">üè† Inicio</button>
</header>

<section class="hero">
  <div class="float-ornament ornament-1">üéÑ</div>
  <div class="float-ornament ornament-2">‚≠ê</div>
  <div class="float-ornament ornament-3">üéÅ</div>
  
  <div class="hero-content">
    <h1>üéâ Ganadores Oficiales</h1>
    <p>Prime Video GRATIS por 20 d√≠as para los afortunados ganadores</p>
  </div>
</section>

<section class="countdown">
  <h2>‚è≥ Cuenta regresiva</h2>
  <p id="msg">El sorteo fue hoy a las 5:00 PM</p>
  <div class="timer">
    <div class="time"><span id="d">0</span><label>D√çAS</label></div>
    <div class="time"><span id="h">00</span><label>HORAS</label></div>
    <div class="time"><span id="m">00</span><label>MINUTOS</label></div>
    <div class="time"><span id="s">00</span><label>SEGUNDOS</label></div>
  </div>
</section>

<section class="section">
  <h2>üèÜ Lista de ganadores</h2>
  <p id="state">Cargando ganadores... <span class="loading"></span></p>
  <div class="grid" id="grid"></div>
</section>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
// ‚úÖ TUS APIs SIN CAMBIOS
const sb = window.supabase.createClient(
  "https://wwfdmvuwjdqzpkeaxgcb.supabase.co",
  "sb_publishable_tFo5T-sC2sq8D9FgKqJKuQ_MC3en0fl"
);

const $=id=>document.getElementById(id);

// Header scroll effect
window.addEventListener('scroll',()=>{
  $('header').classList.toggle('scrolled',window.scrollY>100);
});

// Countdown (EXACTO A TU C√ìDIGO)
function updateCountdown(){
  const now=new Date();
  const t=new Date();
  t.setHours(17,0,0,0);
  let ms=t-now;
  if(ms<0)ms=0;
  const s=Math.floor(ms/1000);
  $("d").textContent=Math.floor(s/86400);
  $("h").textContent=String(Math.floor((s%86400)/3600)).padStart(2,"0");
  $("m").textContent=String(Math.floor((s%3600)/60)).padStart(2,"0");
  $("s").textContent=String(s%60).padStart(2,"0");
}
updateCountdown();
setInterval(updateCountdown,1000);

// Load winners (EXACTO A TU C√ìDIGO)
async function loadWinners(){
const {data,error}=await sb
  .from("winners")
  .select("id,name,created_at,status")
  .order("created_at",{ascending:true});


  if(error){
    $("state").textContent="‚ùå No se pudo cargar ganadores";
    return;
  }
  if(!data||!data.length){
    $("state").textContent="‚è≥ A√∫n no hay ganadores";
    return;
  }

  $("state").textContent="üéâ ¬°Estos son los ganadores!";
  
  const icons=['üëë','üèÜ','ü•á','üéØ','‚≠ê','üíé','üåü','üé™'];
  
  $("grid").innerHTML=data.map((w,i)=>{
    // Crear estrellas aleatorias para cada tarjeta
    const sparkles=Array(6).fill(0).map((_,j)=>{
      const left=Math.random()*100;
      const delay=Math.random()*3;
      return `<div class="sparkle" style="left:${left}%;animation-delay:${delay}s"></div>`;
    }).join('');
    
    return `
      <div class="card" style="animation-delay:${i*0.3}s">
        <div class="sparkles">${sparkles}</div>
        <div class="card-icon">${icons[i]||'üéÅ'}</div>
        <div class="rank ${i===0?'top-1':''}">#${i+1}</div>
        <div class="info">
  <div class="name">${w.name}</div>

  <div class="date">
    üé¨ Prime Video 20 d√≠as
    <span style="margin-left:10px">üïí ${new Date(w.created_at).toLocaleString("es-PE")}</span>
  </div>

  <div class="date" style="
    margin-top:8px;
    font-weight:800;
    color:${(w.status||'PENDIENTE')==='ENTREGADO'?'#00ff9c':'#FFD700'};
    text-shadow:0 0 10px ${(w.status||'PENDIENTE')==='ENTREGADO'?'rgba(0,255,156,.6)':'rgba(255,215,0,.6)'};
  ">
    ${(w.status||'PENDIENTE')==='ENTREGADO'?'‚úÖ PREMIO ENTREGADO':'‚è≥ PREMIO PENDIENTE'}
  </div>
</div>

        </div>
      </div>
    `;
  }).join("");
  
  // Activar animaciones escalonadas
  setTimeout(()=>{
    document.querySelectorAll('.card').forEach((card,i)=>{
      setTimeout(()=>{
        card.classList.add('show');
      },i*400);
    });
  },100);
}
loadWinners();

// Snow mejorado
for(let i=0;i<50;i++){
  const s=document.createElement("div");
  s.className="snow";
  s.textContent="‚ùÑÔ∏è";
  s.style.left=Math.random()*100+"%";
  s.style.animationDuration=(Math.random()*5+8)+"s";
  s.style.animationDelay=Math.random()*5+"s";
  s.style.fontSize=(Math.random()*12+8)+"px";
  document.body.appendChild(s);
}
</script>
</body>
</html>
